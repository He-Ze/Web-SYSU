<!DOCTYPE  html>
<html  lang="zh-cn">
<head>
  <title>closure</title>
  <script>
    function reg(user,regtime){
        return function(logtime){console.log('user:'+user+'; regtime:'+regtime.toLocaleString('zh-CN')+'; logtime:'+logtime.toLocaleString('zh-CN'))} ;
    }
    function delay(duration){
      let endTime = new Date().getTime()+parseInt(duration);
      while (new Date().getTime() < endTime );
    }
    var login1=reg("log1",new Date());  
    delay(2000);  
    var login2=reg("log2",new Date());
    delay(2000);  
    login1(new Date());   
    delay(2000);  
    login1(new Date());   
    delay(2000); 
    login2(new Date());
    delay(2000);  
    login1(new Date());   
    delay(2000); 
    login2(new Date());
  </script>
</head>
<body>
</body>
</html>


